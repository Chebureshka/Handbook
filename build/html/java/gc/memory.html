

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Общие сведения &mdash; Handbook 2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Виды сборщиков мусора (HotSpot)" href="strategies.html" />
    <link rel="prev" title="GC" href="gc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Handbook
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Java</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../concurrency/concurrency.html">Java Concurrency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jit/jit.html">JIT</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="gc.html">GC</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Общие сведения</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Гипотеза о поколениях</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Организация памяти</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#young-gen">Young Gen</a></li>
<li class="toctree-l4"><a class="reference internal" href="#eden-space">Eden Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="#survivor-space">Survivor Space</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tenured">Tenured</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metaspace">Metaspace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#native-area">Native Area</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Терминология</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="strategies.html">Виды сборщиков мусора (HotSpot)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gc.html#links">Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../collections/collections.html">Java Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scala/collections/collections.html">Scala Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/io.html">Java I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build/build.html">Системы сборки</a></li>
<li class="toctree-l1"><a class="reference internal" href="../specific/specific.html">Java Specific Objects</a></li>
</ul>
<p class="caption"><span class="caption-text">Java Frameworks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../frameworks/logging/logging.html">Логирование</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Handbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="gc.html">GC</a> &raquo;</li>
        
      <li>Общие сведения</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/java/gc/memory.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Общие сведения<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div style="text-align:right; font-style: italic">
    Господи, дай мне места для размещения того, что пока еще нужно, <br>
    Дай мне смелости удалить то, что больше не пригодится, <br>
    И дай мне мудрости, чтобы отличить одно от другого.
</div><div class="section" id="id2">
<h2>Гипотеза о поколениях<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Вероятность смерти как функция от возраста снижается очень быстро. Ее приложение к сборке мусора в частности означает, что подавляющее большинство объектов живут крайне недолго.</p>
<div class="figure align-default">
<img alt="../../_images/9054ad5f8fb541a4acf4095d0847e1b8.png" src="../../_images/9054ad5f8fb541a4acf4095d0847e1b8.png" />
</div>
<p>Вот тут и возникает идея разделения объектов на младшее поколение (young generation) и старшее поколение (old generation).
В соответствии с этим разделением и процессы сборки мусора разделяются на малую сборку (minor GC), затрагивающую только младшее поколение, и полную сборку (full GC), которая может затрагивать оба поколения.</p>
</div>
<div class="section" id="id3">
<h2>Организация памяти<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 10%" />
<col style="width: 9%" />
<col style="width: 12%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="4"><p>Heap Space</p></th>
<th class="head" colspan="6"><p>Non-Heap Space</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="3"><p><a class="reference internal" href="#young-gen">Young Gen</a></p></td>
<td rowspan="2"><p>Old Gen</p></td>
<td colspan="3" rowspan="2"><p>Method Area <br/>
<a class="reference internal" href="#metaspace">Metaspace</a></p></td>
<td colspan="3" rowspan="2"><p><a class="reference internal" href="#native-area">Native Area</a> <br/>
Code Cache</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p><a class="reference internal" href="#survivor-space">Survivor Space</a></p></td>
<td rowspan="2"><p><a class="reference internal" href="#eden-space">Eden Space</a></p></td>
</tr>
<tr class="row-even"><td><p>Survivor 0
<br/> (To)</p></td>
<td><p>Survivor 1
<br/> (From)</p></td>
<td><p><a class="reference internal" href="#tenured">Tenured</a>
Generation</p></td>
<td><p>Runtime
Constant Pool</p></td>
<td><p>Field &amp;
Method Data</p></td>
<td><p>Code</p></td>
<td><p>Thread
Stack, PC,
NativeStack</p></td>
<td><p>Compile</p></td>
<td><p>Native</p></td>
</tr>
</tbody>
</table>
<div class="figure align-default">
<img alt="../../_images/43820188-ba29f744-9b0f-11e8-9583-f42da2d5add8.png" src="../../_images/43820188-ba29f744-9b0f-11e8-9583-f42da2d5add8.png" />
</div>
<div class="section" id="young-gen">
<h3>Young Gen<a class="headerlink" href="#young-gen" title="Permalink to this headline">¶</a></h3>
<p>По умолчанию младшее поколение занимает одну треть всей кучи</p>
</div>
<div class="section" id="eden-space">
<h3>Eden Space<a class="headerlink" href="#eden-space" title="Permalink to this headline">¶</a></h3>
<p>Выделятся память под большую часть создаваемых из программы объектов.</p>
<p>Большая часть объектов живет недолго (итераторы, временные объекты, используемые внутри методов и т.п.), и удаляются при выполнении сборок мусора это области памяти,
не перемещаются в другие области памяти.</p>
<p>Когда данная область заполняется (т.е. количество выделенной памяти в этой области превышает некоторый заданный процент), GC выполняет быструю (minor collection) сборку мусора.
По сравнению с полной сборкой мусора она занимает мало времени, и затрагивает только эту область памяти — очищает от устаревших объектов Eden Space и перемещает выжившие объекты в следующую область.</p>
</div>
<div class="section" id="survivor-space">
<h3>Survivor Space<a class="headerlink" href="#survivor-space" title="Permalink to this headline">¶</a></h3>
<p>Сюда перемещаются объекты из предыдущей, после того, как они пережили хотя бы одну сборку мусора. Время от времени долгоживущие объекты из этой области перемещаются в Tenured Space.</p>
<p>Один из двух регионов Survivor всегда пустой, именно он выбирается для переноса объектов из Eden.</p>
<p>Каждый регион Survivor по умолчанию занимает одну десятую младшего поколения</p>
</div>
<div class="section" id="tenured">
<h3>Tenured<a class="headerlink" href="#tenured" title="Permalink to this headline">¶</a></h3>
<p>Tenured ([ˈtenjʊəd] Old) Generation:
Здесь скапливаются долгоживущие объекты (крупные высокоуровневые объекты, синглтоны, менеджеры ресурсов и проч.).</p>
<p>Когда заполняется эта область, выполняется полная сборка мусора (full, major collection), которая обрабатывает все созданные JVM объекты.</p>
<p>Так же может быть использована для создаваемых объектов, размер которых достаточно велик (объекты-акселераты) для Eden Space, и целесообразнее помещается в Tenured.</p>
</div>
<div class="section" id="metaspace">
<h3>Metaspace<a class="headerlink" href="#metaspace" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://www.artima.com/insidejvm/ed2/jvm5.html">https://www.artima.com/insidejvm/ed2/jvm5.html</a></p>
<p>Здесь хранится метаинформация, используемая JVM (используемые классы, методы и т.п.).
Может динамически расширятся, до определенного момента (OutOfMemoryError).
The method area is created on virtual machine start-up</p>
<ul>
<li><dl>
<dt>Type Information</dt><dd><p>Fully qualified name, Fully qualified name of superclass, Whether or not the type is a class or an interface, The type’s modifiers, An ordered list of the fully qualified names of any direct superinterfaces</p>
<ul>
<li><dl class="simple">
<dt>The Constant Pool</dt><dd><p>For each type it loads, a Java virtual machine must store a constant pool.
A constant pool is an ordered set of constants used by the type, including literals (string, integer, and floating point constants) and symbolic references to types, fields, and methods.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Field Information</dt><dd><p>The field’s name, The field’s type, The field’s modifiers (some subset of public, private, protected, static, final, volatile, transient)
Order must be recorded</p>
</dd>
</dl>
</li>
<li><dl>
<dt>Method Information</dt><dd><p>The method’s name, The method’s return type, The number and types (in order) of the method’s parameters,
The method’s modifiers (some subset of public, private, protected, static, final, synchronized, native, abstract)</p>
<p>For not abstract, not native:
The method’s bytecodes, The sizes of the operand stack and local variables sections of the method’s stack frame, An exception table</p>
<p>Order must be recorded</p>
</dd>
</dl>
</li>
<li><p>Class Variables</p></li>
<li><p>A Reference to Class ClassLoader</p></li>
<li><p>A Reference to Class Class</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Method Tables</dt><dd><p>Array of direct references to all the instance methods that may be invoked on a class instance, including instance methods inherited from superclasses</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="native-area">
<h3>Native Area<a class="headerlink" href="#native-area" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>Stack</dt><dd><p>Область хранящая состояние стека, program counter, native стека для каждого потока
Может бросится OutOfMemoryError, при создании потока, при нехватки места</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Compile</dt><dd><p>Эта область используется JVM, когда включена JIT-компиляция, в ней кешируется скомпилированный платформенно-зависимый код.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="id4">
<h2>Терминология<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Максимальная задержка</dt><dd><p>Максимальное время, на которое сборщик приостанавливает выполнение программы для выполнения одной сборки. Такие остановки называются stop-the-world (или STW).</p>
</dd>
<dt>Пропускная способность</dt><dd><p>Отношение общего времени работы программы к общему времени простоя, вызванного сборкой мусора, на длительном промежутке времени.</p>
</dd>
<dt>Потребляемые ресурсы</dt><dd><p>Объем ресурсов процессора и/или дополнительной памяти, потребляемых сборщиком.</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="strategies.html" class="btn btn-neutral float-right" title="Виды сборщиков мусора (HotSpot)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gc.html" class="btn btn-neutral float-left" title="GC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Chebureshka 🥟❤️🥟

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>